{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="Hey, check out {{ relatedname }} on Furnicraft!">
    <meta property="og:description" content="Only ₹{{ related.offer }}. Don’t miss this deal!">
    
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:type" content="product">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Hey, check out {{ related.name }} on Furnicraft!">
    <meta name="twitter:description" content="Only ₹{{ related.offer }}. Don’t miss this deal!">
    


   

  <title>Spares Corporation</title>

   <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />

  <link rel="stylesheet" href="./static/css/style.css" />

  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500&family=Lato:wght@700;900&display=swap" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>
<link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>

  </style>
</head>

<body class="bg-white  relative">

<div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

<header class="relative bg-cover bg-center h-[40vh] md:h-[70vh]" style="background-image: url('{% static "images/product_page.png" %}');">
    <div class="absolute inset-0 bg-black bg-opacity-60"></div>


<!-- <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

<header class="relative bg-cover bg-center h-[40vh] md:h-[70vh]" 
        style="background-image: url('{% static "images/product_page.png" %}');">
    <div class="absolute inset-0 bg-black bg-opacity-60"></div> -->

    <nav id="navbar" class="fixed top-0 left-0 w-full z-50 px-6 py-4 md:px-24 transition-all duration-300">
      <div class="flex justify-between items-center w-full">

         <a href="{% url 'index' %}" id="brand" class="transition-all block">
      <h1 class="mt-2 text-lg md:text-xl md:mt-0 uppercase font-bold text-[#bc9565]">Spares Corporation</h1>
      <!-- <img src="./static/images/logo.png" alt="FurniCraft Logo" class="h-10 md:h-12" /> -->
    </a>
        <ul id="navLinks"
          class="hidden md:flex items-center space-x-8 py-6 text-white text-[14px] font-semibold uppercase transition-all">
           <li><a href="{% url 'index' %}" class="hover:text-[#bc9565]">Home</a></li>

          <li class="relative group">
  <a href="{% url 'product' %}" class="text-[#bc9565]">Our Products</a>

                    <ul class="text-white absolute left-0 top-full mt-2 bg-black/60 shadow-lg rounded-md opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 grid grid-cols-4 gap-4 p-4 min-w-[500px]">
    <!-- All categories -->
    <li>
        <a href="{% url 'product' %}" 
           class="block hover:underline decoration-[#bc9565] {% if not selected_category %}text-[#bc9565]{% endif %}">
           All
        </a>
    </li>

    <!-- Loop through categories -->
    {% for cat in categories %}
    <li>
        <a href="{% url 'product' %}?category={{ cat.id }}" 
           class="block hover:underline decoration-[#bc9565] {% if selected_category == cat.id|stringformat:'s' %}text-[#bc9565]{% endif %}">
           {{ cat.name }}
        </a>
    </li>
    {% endfor %}
</ul>

          </li>


          <li><a href="{% url 'about' %}" class="hover:text-[#bc9565]">About</a></li>
          <li><a href="{% url 'contact' %}" class="hover:text-[#bc9565]">Contact</a></li>

          <li>
        <a href="tel:+919447182559" class="bg-[#bc9565] text-white px-3 py-2 rounded hover:bg-[#a07f52] transition-all">+91 9447182559</a>

      </li>

          <li class="flex space-x-4 items-center">
            <a href="https://wa.me/919846017009" target="_blank" class="hover:text-[#bc9565]">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M19.05 4.91A9.82 9.82 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01m-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18l-3.12.82l.83-3.04l-.2-.31a8.26 8.26 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24c2.2 0 4.27.86 5.82 2.42a8.18 8.18 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23m4.52-6.16c-.25-.12-1.47-.72-1.69-.81c-.23-.08-.39-.12-.56.12c-.17.25-.64.81-.78.97c-.14.17-.29.19-.54.06c-.25-.12-1.05-.39-1.99-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.14-.25-.02-.38.11-.51c.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31c-.22.25-.86.85-.86 2.07s.89 2.4 1.01 2.56c.12.17 1.75 2.67 4.23 3.74c.59.26 1.05.41 1.41.52c.59.19 1.13.16 1.56.1c.48-.07 1.47-.6 1.67-1.18c.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28" />
              </svg>
            </a>


            <a href="#" class="hover:text-[#bc9565]">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <circle cx="17" cy="7" r="1.5" fill="currentColor" />
                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                  <path d="M16 3c2.76 0 5 2.24 5 5v8c0 2.76-2.24 5-5 5h-8c-2.76 0-5-2.24-5-5v-8c0-2.76 2.24-5 5-5h4Z" />
                  <path d="M12 8c2.21 0 4 1.79 4 4c0 2.21-1.79 4-4 4c-2.21 0-4-1.79-4-4c0-2.21 1.79-4 4-4" />
                </g>
              </svg>
            </a>

            <a href="#" class="hover:text-[#bc9565]">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95" />
              </svg>
            </a>
          </li>


        </ul>

        <div class="md:hidden z-50">
          <button id="menuBtn" class="text-white text-2xl transition-all">&#9776;</button>
        </div>
      </div>
    </nav>

    <div id="mobileMenu"
      class="fixed top-0 right-0 h-full w-3/4 bg-black bg-opacity-95 text-white text-lg z-[9999] hidden">
      <div class="flex justify-end px-4 pt-4">
        <button id="closeBtn" class="text-3xl font-bold focus:outline-none">&times;</button>
      </div>
      <ul class="flex flex-col items-start space-y-6 p-6 pt-10 uppercase text-[14px] font-semibold">
        <li><a href="{% url 'index' %}" class="text-[#bc9565]">Home</a></li>
        <li><a href="{% url 'product' %}" class="hover:text-[#bc9565]">Our Products</a></li>
        <li><a href="{% url 'about' %}" class="hover:text-[#bc9565]">About</a></li>
        <li><a href="{% url 'contact' %}" class="hover:text-[#bc9565]">Contact</a></li>
       <li><a href="tel:+919447182559" class="bg-[#bc9565] text-white px-3 py-1 rounded hover:bg-[#a07f52] transition-all">+91 9447182559</a></li>
    
     <li class="flex space-x-4 items-center">
<a href="https://wa.me/919846017009" target="_blank" class="hover:text-[#bc9565]">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
    <path fill="currentColor" d="M19.05 4.91A9.82 9.82 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01m-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18l-3.12.82l.83-3.04l-.2-.31a8.26 8.26 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24c2.2 0 4.27.86 5.82 2.42a8.18 8.18 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23m4.52-6.16c-.25-.12-1.47-.72-1.69-.81c-.23-.08-.39-.12-.56.12c-.17.25-.64.81-.78.97c-.14.17-.29.19-.54.06c-.25-.12-1.05-.39-1.99-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.14-.25-.02-.38.11-.51c.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31c-.22.25-.86.85-.86 2.07s.89 2.4 1.01 2.56c.12.17 1.75 2.67 4.23 3.74c.59.26 1.05.41 1.41.52c.59.19 1.13.16 1.56.1c.48-.07 1.47-.6 1.67-1.18c.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28"/>
  </svg>
</a>

  <a href="#" class="hover:text-[#bc9565]">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
      <circle cx="17" cy="7" r="1.5" fill="currentColor"/>
      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
        <path d="M16 3c2.76 0 5 2.24 5 5v8c0 2.76-2.24 5-5 5h-8c-2.76 0-5-2.24-5-5v-8c0-2.76 2.24-5 5-5h4Z"/>
        <path d="M12 8c2.21 0 4 1.79 4 4c0 2.21-1.79 4-4 4c-2.21 0-4-1.79-4-4c0-2.21 1.79-4 4-4"/>
      </g>
    </svg>
  </a>

  <a href="#" class="hover:text-[#bc9565]">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
      <path fill="currentColor" d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95"/>
    </svg>
  </a>
</li>
      </ul>
    </div>


    <div class="relative z-10 flex flex-col justify-center items-center h-full px-6 md:px-20 text-white text-center">
      <h1 class="text-4xl md:text-6xl  font-bold mb-4 uppercase text-center" style="line-height: 1.3;">
        OUR PRODUCTS
      </h1>
      <p class="text-lg md:text-xl max-w-xl mt-2">
  <a href="{% url 'index' %}" class=" hover:underline">Home</a> / Products
</p>
</div>
  </header>


  <section class="flex flex-col lg:flex-row gap-10 mt-20 px-6 lg:px-20">
    <div class="lg:w-1/2">
      <div class="w-full h-[400px] mb-4 cursor-pointer">
        <!-- Show first image or a placeholder -->
        {% if product.images.all %}
        <img id="mainImage" src="{{ product.images.all.0.image.url }}" alt="{{ product.name }}"
          class="w-full h-full object-cover rounded-xl shadow" />
        {% else %}
        <img id="mainImage" src="/static/images/placeholder.png" alt="No image"
          class="w-full h-full object-cover rounded-xl shadow" />
        {% endif %}
      </div>

      <div class="relative flex items-center">
        <button id="scrollLeft" class="absolute left-0 z-10 p-2">
          &#10094;
        </button>

        <div id="thumbnailContainer" class="flex gap-3 overflow-x-auto scrollbar-hide px-10">
          {% for img in product.images.all %}
          <img src="{{ img.image.url }}" class="w-24 h-24 object-cover rounded cursor-pointer thumbnail"
            onclick="document.getElementById('mainImage').src=this.src" />
          {% empty %}
          <p class="text-gray-500">No images available</p>
          {% endfor %}
        </div>

        <button id="scrollRight" class="absolute right-0 z-10 p-2">
          &#10095;
        </button>
      </div>
    </div>


    <div class="lg:w-1/2 space-y-6">
      <div>
        <h1 class="text-3xl font-bold text-[#2e2e2e] uppercase">{{ product.name }}</h1>
        <p class="text-lg text-gray-500">{{product.subsentence}}</p>
      </div>

      <div class="flex items-center gap-4">
        <!-- <span class="text-xl line-through text-gray-400">₹{{ product.price }}</span>
        <span class="text-3xl font-bold text-[#bc9565]">{{ product.offer }}</span>
        <span class="text-green-600 font-semibold">{{ product.discount }}  OFF</span> -->
        {% if product.price %}
    <span class="text-xl line-through text-gray-400">₹{{ product.price }}</span>
{% endif %}

{% if product.offer %}
    <span class="text-3xl font-bold text-[#bc9565]">{{ product.offer }}</span>
{% endif %}

{% if related.discount_percentage %}
    <span>{{ related.discount_percentage|add:"% off" }}</span>
{% endif %}


      </div>

      <div>
        <h3 class="text-lg font-semibold text-[#2e2e2e] mb-1">Description</h3>
        <p class="text-gray-600 leading-relaxed">
          {{product.description}}
        </p>
      </div>

      <div class="flex items-center gap-2">
        <span class="font-semibold text-[#2e2e2e]">Delivery:</span>
        <span class="text-gray-600">Within 5–7 Business Days</span>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <p class="font-semibold text-[#2e2e2e]">Material:</p>
          <p class="text-gray-600">{{ product.material }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Dimensions:</p>
          <p class="text-gray-600">{{ product.dimension }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Color:</p>
          <p class="text-gray-600">{{ product.color }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Weight:</p>
          <p class="text-gray-600">{{ product.weight }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Seating Capacity:</p>
          <p class="text-gray-600">{{ product.seating_capacity }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Warranty:</p>
          <p class="text-gray-600">{{ product.warranty }}</p>
        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Availability:</p>
          <!-- <p class="text-green-600 font-semibold">{{ product.get_availability_display }}</p> -->
           <p class="{% if product.availability == 'in_stock' %}text-green-600{% else %}text-red-600{% endif %} font-semibold">
    {{ product.get_availability_display }}
</p>

        </div>
        <div>
          <p class="font-semibold text-[#2e2e2e]">Return Policy:</p>
          <p class="text-gray-600">{{ product.return_policy }}</p>
        </div>
      </div>

      <!-- <div class="flex items-center gap-4 mt-4">
        <label for="quantity" class="font-semibold text-[#2e2e2e]">Quantity:</label>
        <input id="quantity" type="number" min="1" value="1" class="border border-gray-300 rounded px-3 py-1 w-20">
      </div> -->

      <button
    class="mt-6 w-[20%] max-md:w-[30%] bg-[#bc9565] text-white py-3 rounded hover:bg-[#a27848] transition duration-300"
    onclick="openEnquiryModal('{{ product.name }}', '{{ product.material }}', '{{ product.offer }}', '{{ product.color }}', 1)">
    Enquire Now
</button>
    </div>


    <div id="imageModal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-70 z-50">
      <div class="relative bg-white rounded-lg p-4 max-w-4xl w-full">
        <button id="closeModal" class="absolute top-2 right-3 text-gray-600 text-2xl font-bold">&times;</button>

        <button id="modalPrev"
          class="absolute left-4 top-1/2 transform -translate-y-1/2 text-3xl text-gray-700 hover:text-black">
          &#10094;
        </button>

        <img id="modalImage" src="" class="w-full max-h-[80vh] object-contain rounded-lg" />

        <button id="modalNext"
          class="absolute right-4 top-1/2 transform -translate-y-1/2 text-3xl text-gray-700 hover:text-black">
          &#10095;
        </button>
      </div>
    </div>



</section>

    <!-- <div id="enquiryModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
      <div class="bg-white rounded-lg w-full max-w-lg p-6 relative">
        <button onclick="closeEnquiryModal()"
          class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl">&times;</button>
        <h1 class="text-2xl font-bold text-[#2e2e2e] mb-4">Product Enquiry</h1>

        <form>
          <div class="mb-4">
            <label class="block text-sm font-medium">Product Name</label>
            <input id="productName" type="text" class="w-full border border-gray-300 rounded px-4 py-2 mt-1" readonly>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium">Material</label>
            <input id="productMaterial" type="text" class="w-full border border-gray-300 rounded px-4 py-2 mt-1"
              readonly>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium">Price</label>
            <input id="productPrice" type="text" class="w-full border border-gray-300 rounded px-4 py-2 mt-1" readonly>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium">Color</label>
            <input id="productColor" type="text" class="w-full border border-gray-300 rounded px-4 py-2 mt-1" readonly>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium">Quantity</label>
            <input id="productQuantity" type="number" class="w-full border border-gray-300 rounded px-4 py-2 mt-1"
              readonly>
          </div>


          <div class="mb-4">
            <label class="block text-sm font-medium">Your Name</label>
            <input type="text" class="w-full border border-gray-300 rounded px-4 py-2 mt-1"
              placeholder="Enter your name" required>
          </div>
          <div class="mb-4">
            <label class="block text-sm font-medium">Contact Number</label>
            <input type="tel" class="w-full border border-gray-300 rounded px-4 py-2 mt-1"
              placeholder="Enter your contact number" required>
          </div>

          <button type="submit"
            class="w-full bg-[#bc9565] text-white py-2 rounded hover:bg-[#a27848] transition duration-300">
            Submit Enquiry
          </button>
        </form>
      </div>
    </div> -->

<!-- Enquiry Modal -->
<!-- Enquiry Modal -->
<div id="enquiryModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
  <div class="bg-white rounded-lg w-full max-w-2xl max-h-[70vh] overflow-y-auto px-[2rem] relative pt-5">
    
    <!-- Close Button -->
    <button onclick="closeEnquiryModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl">&times;</button>
    
    <h1 class="text-2xl font-bold text-[#2e2e2e] mb-4">Product Enquiry</h1>

    <form id="enquiryForm" method="POST" action="{% url 'product_detail' product.id %}">
      {% csrf_token %}

      <!-- Product Name -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Product Name</label>
        <input id="productNameDisplay" value="{{ product.name }}" type="text" readonly class="w-full border border-gray-300 rounded px-4 py-2 mt-1">
        <input type="hidden" name="product_name" id="productName">
      </div>

      <!-- Material -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Material</label>
        <input id="productMaterialDisplay" value="{{ product.material }}" type="text" readonly class="w-full border border-gray-300 rounded px-4 py-2 mt-1">
        <input type="hidden" name="product_material" id="productMaterial">
      </div>

      <!-- Price -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Price</label>
        <input id="productPriceDisplay" value="{{ product.offer }}" type="text" readonly class="w-full border border-gray-300 rounded px-4 py-2 mt-1">
        <input type="hidden" name="product_offer" id="productPrice">
      </div>

      <!-- Color -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Color</label>
        <input id="productColorDisplay" value="{{ product.color }}" type="text" readonly class="w-full border border-gray-300 rounded px-4 py-2 mt-1">
        <input type="hidden" name="product_color" id="productColor">
      </div>

      <!-- Quantity -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Quantity</label>
        <input type="number" 
               class="w-full border border-gray-300 rounded px-4 py-2 mt-1"
               id="product_quantity" 
               name="product_quantity" 
               value="{{ product.quantity }}" 
               min="1" max="999">
      </div>

      <!-- Customer Name -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Your Name</label>
        <input type="text" name="customer_name" id="customerName" class="w-full border border-gray-300 rounded px-4 py-2 mt-1" placeholder="Enter your name" required>
      </div>

      <!-- Contact Number -->
      <div class="mb-4">
        <label class="block text-sm font-medium">Contact Number</label>
        <input type="tel" name="contact_number" id="contactNumber" class="w-full border border-gray-300 rounded px-4 py-2 mt-1" placeholder="Enter your contact number" required>
      </div>

      <!-- Submit -->
      <button type="submit" class="w-full bg-[#bc9565] text-white py-2 rounded hover:bg-[#a27848] transition duration-300">
        Submit Enquiry
      </button>
    </form>
  </div>
</div>

<!-- Scripts -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Open modal with data
    window.openEnquiryModal = function(name, material, price, color, quantity) {
        document.getElementById("productName").value = name;
        document.getElementById("productMaterial").value = material;
        document.getElementById("productPrice").value = price;
        document.getElementById("productColor").value = color;

        let qty = Math.max(1, Math.min(parseInt(quantity) || 1, 999));
        document.getElementById("product_quantity").value = qty;

        document.getElementById("enquiryModal").classList.remove("hidden");
    }

    // Close modal
    window.closeEnquiryModal = function() {
        document.getElementById("enquiryModal").classList.add("hidden");
    }

    // Real-time quantity check
    document.getElementById("product_quantity").addEventListener("input", function() {
        let val = parseInt(this.value) || 1;
        if (val < 1) val = 1;
        if (val > 999) val = 999;
        this.value = val;
    });

    // Form submit validation
    document.getElementById("enquiryForm").addEventListener("submit", function(event) {
        let qty = parseInt(document.getElementById("product_quantity").value);

        if (!qty || qty < 1) {
            alert("Quantity must be at least 1.");
            event.preventDefault();
            return;
        }

        if (qty > 999) {
            alert("Quantity cannot be more than 999.");
            event.preventDefault();
            return;
        }
    });
});
</script>


<!-- <script>
document.addEventListener("DOMContentLoaded", function() {
    // Open modal and fill product details
    window.openEnquiryModal = function(name, material, price, color, quantity) {
        document.getElementById("productName").value = name;
        document.getElementById("productMaterial").value = material;
        document.getElementById("productPrice").value = price;
        document.getElementById("productColor").value = color;
        document.getElementById("productQuantity").value = quantity;

        document.getElementById("enquiryModal").classList.remove("hidden");
    }

    // Close modal
    window.closeEnquiryModal = function() {
        document.getElementById("enquiryModal").classList.add("hidden");
    }
});
</script> -->







  </section>


<section class="mt-20 px-6 md:px-24 relative">
  <h1 class="text-2xl font-bold text-[#2e2e2e] mb-6 inline-block pb-2">
    {% if related_products.0.category.id == product.category.id %}
      Related Products
    {% else %}
      You May Also Like
    {% endif %}
  </h1>

  <!-- Left arrow -->
  <button 
    class="absolute left-0 top-1/2 -translate-y-1/2 text-black w-10 h-10 rounded-full flex items-center justify-center z-50 md:hidden bg-white shadow"
    onclick="scrollCards(-1)">
    &#10094;
  </button>

  {% if related_products %}
  <div id="cardContainer" class="hide-scrollbar flex md:grid md:grid-cols-2 lg:grid-cols-4 overflow-x-auto md:overflow-visible gap-6 scroll-smooth snap-x snap-mandatory px-1 md:px-0">
    {% for related in related_products %}
      <a href="{% url 'product_detail' related.id %}" class="min-w-full md:min-w-0 snap-start group relative">
        <div class="bg-white rounded-xl shadow p-4 hover:shadow-lg transition duration-300 w-full relative">

          <!-- Share button -->
          <div
            class="absolute top-2 right-2 z-20 cursor-pointer bg-white rounded-full w-8 h-8 flex items-center justify-center shadow hover:shadow-md hover:bg-gray-100 transition duration-300 share-btn"
            data-share-url="{{ request.scheme }}://{{ request.get_host }}{% url 'product_detail' related.id %}"
            data-product-id="{{ related.id }}"
            data-product-name="{{ related.name }}"
            data-product-offer="{{ related.offer|default:related.price }}"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="#3f3f3f">
              <path d="M17 22q-1.25 0-2.125-.875T14 19q0-.15.075-.7L7.05 14.2q-.4.375-.925.588T5 15q-1.25 0-2.125-.875T2 12t.875-2.125T5 9q.6 0 1.125.213t.925.587l7.025-4.1q-.05-.175-.062-.337T14 5q0-1.25.875-2.125T17 2t2.125.875T20 5t-.875 2.125T17 8q-.6 0-1.125-.213T14.95 7.2l-7.025 4.1q.05.175.063.338T8 12t-.012.363t-.063.337l7.025 4.1q.4-.375.925-.587T17 16q1.25 0 2.125.875T20 19t-.875 2.125T17 22m0-2q.425 0 .713-.287T18 19t-.288-.712T17 18t-.712.288T16 19t.288.713T17 20M5 13q.425 0 .713-.288T6 12t-.288-.712T5 11t-.712.288T4 12t.288.713T5 13m12-7q.425 0 .713-.288T18 5t-.288-.712T17 4t-.712.288T16 5t.288.713T17 6m0-1"/>
            </svg>
          </div>

          <!-- Product images -->
          <div class="relative w-full h-64 overflow-hidden rounded-md mb-4 group">
            {% if related.images.all|length > 0 %}
              <img src="{{ related.images.all.0.image.url }}"
                   alt="{{ related.name }}"
                   class="absolute inset-0 w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-0">
              {% if related.images.all|length > 1 %}
                <img src="{{ related.images.all.1.image.url }}"
                     alt="{{ related.name }} hover"
                     class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-300 group-hover:opacity-100">
              {% endif %}
            {% else %}
              <img src="{% static 'images/placeholder.png' %}"
                   alt="No image available"
                   class="absolute inset-0 w-full h-full object-cover">
            {% endif %}
          </div>

          <h3 class="text-lg font-semibold">{{ related.name }}</h3>
          <p class="text-sm text-gray-500">Material: {{ related.material }}</p>

          <div class="mt-1 flex items-center gap-2">
            {% if product.price %}
    <span class="text-xl line-through text-gray-400">₹{{ product.price }}</span>
{% endif %}

{% if product.offer %}
    <span class="text-3xl font-bold text-[#bc9565]">{{ product.offer }}</span>
{% endif %}
            {% if related.discount_percentage %}
    <span>{{ related.discount_percentage|add:"% off" }}</span>
{% endif %}

          </div>

          <button class="mt-4 w-full bg-[#bc9565] text-white py-2 rounded hover:bg-[#a27848] transition duration-300">
            Detail View
          </button>

        </div>
      </a>
    {% endfor %}
  </div>

  <!-- Right arrow -->
  <button
    class="absolute right-0 top-1/2 -translate-y-1/2 text-black w-10 h-10 rounded-full flex items-center justify-center z-50 md:hidden bg-white shadow"
    onclick="scrollCards(1)">
    &#10095;
  </button>
  {% else %}
    <p class="text-gray-500">No related products available right now.</p>
  {% endif %}
</section>
<!-- Modal -->
<div id="shareModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-xl p-6 w-full max-w-sm relative shadow-lg animate-fadeIn">

    <!-- Close Button -->
    <button id="closeShare" aria-label="Close share modal"
      class="absolute top-2 right-2 text-gray-600 hover:text-black text-2xl leading-none focus:outline-none">
      &times;
    </button>

    <h1 class="text-xl font-bold mb-6 text-center text-gray-800">Share this product</h1>

    <div class="flex flex-col gap-4">
      <a id="whatsappLink" target="_blank" rel="noopener noreferrer"
        class="flex items-center gap-3 px-4 py-2 rounded-lg bg-green-100 text-green-700 hover:bg-green-200 transition">
        <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" alt="WhatsApp" class="w-6 h-6" />
        <span>Share on WhatsApp</span>
      </a>

      <a id="facebookLink" target="_blank" rel="noopener noreferrer"
        class="flex items-center gap-3 px-4 py-2 rounded-lg bg-blue-100 text-blue-700 hover:bg-blue-200 transition">
        <img src="https://img.icons8.com/color/48/000000/facebook-new.png" alt="Facebook" class="w-6 h-6" />
        <span>Share on Facebook</span>
      </a>

      <button id="copyLinkBtn"
        class="flex items-center gap-3 px-4 py-2 rounded-lg bg-gray-100 text-gray-800 hover:bg-gray-200 transition">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15 1.25h-4.056c-1.838 0-3.294 0-4.433.153c-1.172.158-2.121.49-2.87 1.238c-.748.749-1.08 1.698-1.238 2.87c-.153 1.14-.153 2.595-.153 4.433V16a3.75 3.75 0 0 0 3.166 3.705c.137.764.402 1.416.932 1.947c.602.602 1.36.86 2.26.982c.867.116 1.97.116 3.337.116h3.11c1.367 0 2.47 0 3.337-.116c.9-.122 1.658-.38 2.26-.982s.86-1.36.982-2.26c.116-.867.116-1.97.116-3.337v-5.11c0-1.367 0-2.47-.116-3.337c-.122-.9-.38-1.658-.982-2.26c-.531-.53-1.183-.795-1.947-.932A3.75 3.75 0 0 0 15 1.25m2.13 3.021A2.25 2.25 0 0 0 15 2.75h-4c-1.907 0-3.261.002-4.29.14c-1.005.135-1.585.389-2.008.812S4.025 4.705 3.89 5.71c-.138 1.029-.14 2.383-.14 4.29v6a2.25 2.25 0 0 0 1.521 2.13c-.021-.61-.021-1.3-.021-2.075v-5.11c0-1.367 0-2.47.117-3.337c.12-.9.38-1.658.981-2.26c.602-.602 1.36-.86 2.26-.981c.867-.117 1.97-.117 3.337-.117h3.11c.775 0 1.464 0 2.074.021M7.408 6.41c.277-.277.665-.457 1.4-.556c.754-.101 1.756-.103 3.191-.103h3c1.435 0 2.436.002 3.192.103c.734.099 1.122.28 1.399.556c.277.277.457.665.556 1.4c.101.754.103 1.756.103 3.191v5c0 1.435-.002 2.436-.103 3.192c-.099.734-.28 1.122-.556 1.399c-.277.277-.665.457-1.4.556c-.755.101-1.756.103-3.191.103h-3c-1.435 0-2.437-.002-3.192-.103c-.734-.099-1.122-.28-1.399-.556c-.277-.277-.457-.665-.556-1.4c-.101-.755-.103-1.756-.103-3.191v-5c0-1.435.002-2.437.103-3.192c.099-.734.28-1.122.556-1.399" clip-rule="evenodd"/></svg>
        <span>Copy Product URL</span>
      </button>
    </div>
  </div>
</div>


  <footer class="bg-black text-white px-6 md:px-24 py-20 mt-10">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-10 mb-10">
      <div>
        <img src="/static/images/logo11.png" alt="Logo" class="w-44 mb-4">
        <p class="text-md text-gray-300">
          We offer end-to-end furniture manufacturing, repair and polishing services to bring your spaces to life.
        </p>
      </div>

      <div>
        <h1 class="text-lg font-semibold mb-4 uppercase">Our Services</h1>
        <ul class="space-y-4 text-sm text-gray-300 font-lato">
          <li><a href="#" class="hover:text-white">Furniture Manufacturing</a></li>
          <li><a href="#" class="hover:text-white">Furniture Repair</a></li>
          <li><a href="#" class="hover:text-white">Polishing & Refinishing</a></li>
          <li><a href="#" class="hover:text-white">Home Delivery & Setup</a></li>
        </ul>
      </div>

      <div>
      <h1 class="text-lg font-semibold mb-4 uppercase">Quick Links</h1>
      <ul class="space-y-4 text-sm text-gray-300 ">
        <li><a href="{% url 'index' %}" class="hover:text-white">Home</a></li>
        <li><a href="{% url 'product' %}" class="hover:text-white">Our Products</a></li>
        <li><a href="{% url 'about' %}" class="hover:text-white">About</a></li>
        <li><a href="{% url 'contact' %}" class="hover:text-white">Contact</a></li>
      </ul>
    </div>

      <div>
        <h1 class="text-lg font-semibold mb-4 uppercase">Contact Us</h1>
        <p class="text-sm text-gray-300">
          Peegee Complex,<br>
          Chittoor Road,<br>
          Pachalam,Cochin - 682012
        </p>
        <p class="mt-4 text-sm text-gray-300">
          Phone: <a href="tel:+919447182559" class="hover:text-white">+91 9447182559</a><br>
          Email: <a href="mailto:rajgopal.pu@gmail.com" class="hover:text-white">rajgopal.pu@gmail.com</a>
        </p>
      </div>


    </div>

    <hr class="border-gray-600 mb-6" />

    <div class="text-center text-sm text-gray-400">
      © 2025 All Rights Reserved. Powered by <span class="text-white font-semibold">Cybexel</span>
    </div>
  </footer>
  <script>
document.addEventListener("DOMContentLoaded", function() {
    // Open modal and fill product details
    window.openEnquiryModal = function(name, material, price, color, quantity) {
        document.getElementById("productName").value = name;
        document.getElementById("productMaterial").value = material;
        document.getElementById("productPrice").value = price;
        document.getElementById("productColor").value = color;
        document.getElementById("product_quantity").value = quantity;


        document.getElementById("enquiryModal").classList.remove("hidden");
    }

    // Close modal
    window.closeEnquiryModal = function() {
        document.getElementById("enquiryModal").classList.add("hidden");
    }
});
</script>

 <script>
document.getElementById("enquiryForm").addEventListener("submit", function (e) {
  e.preventDefault();

  let nameField = document.getElementById("customerName");
  let contactField = document.getElementById("contactNumber");

  let name = nameField.value.trim();
  let contact = contactField.value.trim();

  let namePattern = /^[A-Za-z\s]{2,}$/;
  let phonePattern = /^[0-9]+$/;
  let urlPattern = /(https?:\/\/|www\.)/i;

  // Name validation
  if (!namePattern.test(name) || urlPattern.test(name)) {
    alert("Your name must contain only letters and spaces, at least 2 characters, and no URLs.");
    nameField.focus();
    return;
  }

  // Contact number validation
  if (urlPattern.test(contact)) {
    alert("Contact number cannot contain URLs.");
    contactField.focus();
    return;
  }
  if (!phonePattern.test(contact)) {
    alert("Contact number must contain only digits, no spaces or symbols.");
    contactField.focus();
    return;
  }
  if (contact.length < 10 || contact.length > 15) {
    alert("Contact number must be between 10 and 15 digits long.");
    contactField.focus();
    return;
  }

  // ✅ Fill hidden inputs from readonly display inputs
  document.getElementById("productName").value = document.getElementById("productNameDisplay").value;
  document.getElementById("productMaterial").value = document.getElementById("productMaterialDisplay").value;
  document.getElementById("productPrice").value = document.getElementById("productPriceDisplay").value;
  document.getElementById("productColor").value = document.getElementById("productColorDisplay").value;

  alert("Enquiry submitted successfully!");
  e.target.submit();
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const shareModal = document.getElementById("shareModal");
    const closeBtn = document.getElementById("closeShare");
    const whatsappLink = document.getElementById("whatsappLink");
    const facebookLink = document.getElementById("facebookLink");
    const copyBtn = document.getElementById("copyLinkBtn");

    document.querySelectorAll(".share-btn").forEach(btn => {
        btn.addEventListener("click", function (event) {
            event.preventDefault();
            event.stopPropagation();

            const productURL = btn.dataset.shareUrl;
            const productName = btn.dataset.productName;
            const productPrice = btn.dataset.productOffer || "0";

            const message = `Check out this product: ${productName}\nPrice: ₹${productPrice}\n${productURL}`;

            // Update links
            whatsappLink.href = `https://wa.me/?text=${encodeURIComponent(message)}`;
            facebookLink.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(productURL)}`;

            shareModal.classList.remove("hidden");
        });
    });

    closeBtn.addEventListener("click", () => shareModal.classList.add("hidden"));
    window.addEventListener("click", e => { if (e.target === shareModal) shareModal.classList.add("hidden"); });

    copyBtn.addEventListener("click", () => {
        const url = document.querySelector(".share-btn").dataset.shareUrl;
        navigator.clipboard.writeText(url)
            .then(() => alert("Product URL copied!"))
            .catch(() => alert("Failed to copy URL."));
    });
});
</script>

<script>
function scrollCards(direction) {
    const container = document.getElementById('cardContainer');
    if (!container) return;

    const scrollAmount = container.offsetWidth / 2; // adjust scroll distance
    container.scrollBy({
        left: direction * scrollAmount,
        behavior: 'smooth'
    });
}
</script>
  <script src="{% static 'js/script.js'  %}"></script>

  <script src="./static/js/script.js"></script>
</body>

</html>